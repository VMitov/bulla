{{ $currentPage := . }}

<ul class="menu-list">
    {{ range .Site.Menus.main }}
    <li>
        <a href="{{ .URL }}" class="{{if $currentPage.IsMenuCurrent "main" . }}is-active{{end}} {{if $currentPage.HasMenuCurrent "main" . }}has-active{{end}} {{ if .HasChildren }}has-children{{ end }}">
            {{ .Pre }} {{ .Name }}
        </a>

        {{ if .HasChildren }}
        <ul class="sub-menu">
            {{ range .Children }}
            <li>
                <a href="{{ .URL }}" class="{{ if $currentPage.IsMenuCurrent "main" . }}is-active{{ end }}">{{ .Pre }} {{ .Name }}</a>

                {{ if .HasChildren }}
                <ul class="sub-menu">
                    {{ range .Children }}
                    <li>
                        <a href="{{ .URL }}" class="{{ if $currentPage.IsMenuCurrent "main" . }}is-active{{ end }}">{{ .Pre }} {{ .Name }}</a>
                    </li>
                    {{ end }}
                </ul>
                {{ end}}
            </li>
            {{ end }}
        </ul>
        {{ end}}
    </li>
    {{ end }}
</ul>
